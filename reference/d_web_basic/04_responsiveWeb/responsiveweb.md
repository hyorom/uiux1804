# Responsive web

반응형 웹디자인(rwd)은 서버가 항상 모든 기기에 동일한 html코드를 보내 css를 사용해 기기의 페이지 렌더링을 조정하는 설정으로 웹앱의 방식중 하나입니다. 

즉, 하나의 웹페이지에 다양한 기기의 화면을 구성하여 처리하도록 만드는 방법으로, 모든 기기에 동일한 코드(html)을 작성하고, 화면 크기에 맞게 조정합니다.

이외의 다른 기능으로는 하이브리드웹(hibrid web), 적응형웹(adaptive web)이 있습니다.
반응형의 웹은 웹앱의 일종으로, 네이티브웹(앱)과는 별도의 성격을 띄고 있습니다.



- **적응형 웹:**  웹앱의 일종으로 미리정해진 몇가지의 화면 크기를 기준으로 해당 비율에 맞춰 페이지를 구성하는 방식(모든기기를 대응하기 어려워 점점 사용률이 줄어들고 있는 추세입니다.)
- **네이티브 웹**: 기기에 내장되는 앱형식으로, 사용되는 OS 에따라 형태가 다르게 나타나는 방식이며, 성능면에서는 가장 빠른 것이 장점입니다. 각각의 디바이스 환경에 맞춰 제작해야 합니다. 
- **웹앱** : 모바일/다양한 디바이스 기기상에서 사용하는 인터넷 사이트를 말하며, 별도의 설치가 필요하지 않습니다. 하지만, pc와 함께 사용을 고려해야하기 때문에 터치나 스와이프 방식등을 고려하여 개발하기 까다롭습니다. 
- **하이브리드 웹** :  네이티브앱과 웹앱의 합쳐진형태로 볼 수 있습니다. 대부분이 웹개발 지식이 필요로하지만 앱개발의 지식또한 함께 필요로 합니다. 모바일과, pc페이지를 분류하여 사용하는 편이므로, 개발속도가 더디다는 문제가 있습니다. 



---

[TOC]

---

## 반응형 웹제작시 사용할 세팅

반응형 웹제작시에는 각 문서에 몇가지를 세팅해서 사용해야 합니다. 

1. html 문서에서는 `<meta name="viewport">`를 설정해야하며,
2. css 문서에서는 `@media query`를 설정하여, 문서를 작성하고,
3. js 문서에서는 각 디바이스의 가로값을 기준으로 각각의 기능을 구동처리해야 합니다. 

---

### HTML 문서에서의 세팅

html문서에서는 각각의 반응형 웹을 설정하기 위해 `<meta>`를 설정하여 작성하도록 되어있습니다. 

```html
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
```

기본적으로는 위의 내용을 작성함으로서, <br />각 페이지의 크기와 배율을 설정하여 브라우저의 크기를 설정하고, 동작하도록 설정합니다.

- `name="viewport" ` : 페이지가 모든 기기에 맞춰 조정된다는 것을 브라우저에 알리기 위해 처리하는 명령어입니다.

- `content=" "` : 각 내용을 설정하여 해당 브라우저에 정보를 전달합니다.

  - `width=` 기본 브라우저의 가로값의 내용을 설정하게 만드는 내용입니다.
    - `device-width` width의 값으로 device-width를 작성하면 기기의 가로값으로 처리하여 인식합니다.
    - `1000` device-width 대신 수치를 입력할 수도 있습니다. <br />수치를 입력한다면 해당 수치를 고정값으로 가로값 비율이 축소되어  <br /> 해당 디바이스(기기)에 보여 줄 수 있도록 처리하는 명령어입니다. 
  - `initial-scale=` 기본 화면 비율을 설정하는 값입니다.  <br /> 화면의 형태를 작성된 내용을 기준으로 보여주는 비율을 작성할 수 있습니다. `100% 화면`을 보여주려면 **`1.0`**, `50% 의 축소된 화면`으로 보여주렴 **`0.5`**를 입력할 수 있습니다. 

  

---

#### `<meta name="viewport">` 추가내용 설정

```html
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, maximum-scale=3, minimum-scale=0.5" />
```

기본 화면의 설정 외에도 추가내용을 작성할 수 있습니다.

- 기본 설정내용은 이전과 동일합니다.
  - `user-scalable=` 사용자가 직접 확대 및 축소를 설정할 수 있도록 설정합니다. <br /> 확대/축소가 되지 않도록 처리하려면 `no`를 작성하고, 확대/축소를 가능하게 만들려면 `yes`를 작성합니다.
  - `maximum-scale`, `minimum-scale` 사용자가 확대/축소를 처리시 최대 및 최소의 설정이 가능한 범위를 지정할 수 있습니다. 최대확대(maximum-scale)에서 `300% 까지 확대`가능하게 만들려면 **`3.0`**, <br /> 최소축소(minium-scale)에서 `50%까지 축소`가능하게 하려면 **`0.5`**를 입력하면 됩니다.

---

### CSS에서 설정하기

html문서에서 `viewport` 설정을 하였다면, 이제 css를 통해서 내용을 수정 해야 합니다. 
미디어 쿼리라는 내용을 작성해야 합니다. 

> 쿼리라는 의미는 정보수집 및 요청에쓰이는 컴퓨터언어라는 의미를 가지고있으며, 쉽게 문서를 작성하는 언어 라고 생각하면 이해하기 쉽습니다. 



**미디어 쿼리란?** 미디어 타입과 같이 폭, 높이, 색깔과 같이 디바이스의 특성을 이용하여 스타일 시트의 적용범위를 제한하는 하나 이상의 식으로 구성되어있는 것을 말합니다. <br /> 여기서 말하는 미디어 타입은 css를 작성하는 형태를 이해할 수 있습니다. 

```html
<link rel="stylesheet" media="(max-width: 800px)" href="example.css" />
```

위의 형태처럼 실제로는 html문서에 css문서를 불러오고, 이 문서를 각각의 디바이스 크기를 설정하여 불러올 수 있습니다. 이 형식을 미디어쿼리문 이라고도 합니다. 

---

실제로 대부분은 미디어 쿼리를 html문서에 작성하기 보다는 css내부에 작성하여 처리하는 경우가 많습니다. 

```css
@media (max-width:480px) {
    /* 0~480px 까지의 디바이스 기기의 디자인 스타일을 작성할 수 있습니다. */
}
```

위의 형식으로 작성하여 css를 동작처리하도록 생성합니다. 

하지만 실제로 위의 코드를 작성하기 보다는 다양한 헝식과, 내용을 맞춰 처리하도록, 기기의 형식과, 논리연산을 적용하여 처리하는 경우가 대부분입니다. 

```css
@media screen and (max-width:480px) {
     /* 화면으로 구성된 형태이며, 
        0~480px 까지의 가로값을 가진 디바이스 기기의 디자인 스타일을 작성할 수 있습니다. */
}
```

위의 식을 작성하여 처리합니다. 

간단하게 내용을 정리하자면, 디바이스 기기의 `화면 구성`으로된 형식과(`and`) 해당 기기의 가로값이 `0~480px`으로 구성된 내용에 css를 동작처리하도록 구성하겠다는 의미를 가지고 있습니다. 

- 방금 내용을 정리하자면,위 작성된 `screen`대신 `print`를 작성한다면 인쇄형식을 의미하며 `all`을 입력하면 모든 형식, `tv`라고 입력하면  TV의 가로폭을 기준으로 동작한다는 의미로 처리됩니다. 
- 오른쪽 내용의 `max-width`를 작성하면 해당 기기의 `최대 가로값을 480px`로 설정하겠다는 의미를 가지게 됩니다.
- 이때 `and`를 작성하게 된다면, 좌/우의 내용이 모두 일치하도록 설정해야 동작하겠다는 의미를 가지게 됩니다.

해당 형식은 하나만 작성되는 것이아니라, 여러개를 섞어서 처리할 수 있으며, 다양한 기기와 내용을 처리할때 많이 사용하는 형식이므로, 꼭 알아두는 것이 좋습니다.

위내용을 정리하여, 우리가 작성하는 문서는 다음과 같습니다. 

```css
/* basic design */
	/* 기본이 되는 디자인내용을 모아서 설정하여 작성하는 공간 */

/* mobile */
@media screen and (max-width:480px) {
  /* max-width:480px 값에 해당하는 기기의 내용을 설정하여 작성하는 공간 */
}
/* mobile-H */
@media screen and (min-width:481px) and (max-width:768px) {
  /* min-width:481px과 max-width:768px 값에 해당하는 기기의 내용을 설정하여 작성하는 공간 */
}

/* tablet + pc */
@media screen and (min-width:769px) and (max-width:1366px) {
  /* min-width:769px과 max-width:1366px 값에 해당하는 기기의 내용을 설정하여 작성하는 공간 */
}

/* pc-full */
@media screen and (min-width:1367px) {
  /*min-width:1367px 값에 해당하는 기기의 내용을 설정하여 작성하는 공간 */
}
```

수치와 내용은 변할 수 있지만, <br />기본형식은 위의 내용에서 크게 변하지 않으니, <br />이를 기억하고 제작하면 많은 이해를 도울 수 있습니다. 



---

### js에서 작성하기(jQuery)

해당하는 페이지의 기능을 제어 및 설정하기 위해서는 js는 필수입니다. <br />각각의 기기의 크기를 파악하여 해당영역에서 각각 동작처리하도록 하는 설정이 필요합니다.

```js
// js
(function($) {
  // jquery

	// 브라우저의 가로값을 파악
	var $w = $(window).width();
	// 브라우저의 가로값을 파악하여 기기의 콘솔창에 확인하도록 표기
	console.log($w);

    if($w <= 480){
      console.log('모바일 세로형 형태');
    } else if ($w >= 481 && $w <= 768){
      console.log('모바일 가로형, 타블렛 세로형');
    } else if ($w >= 769 && $w <= 1366){
      console.log('타블렛 가로형, pc형');
    } else if ($w >= 1367) {
      console.log('pc full(확장) 형태');
    }

})(jQuery);
```

위의 내용은 css의 설정과 크게 다르지 않습니다. 
해당기기의 가로값을 파악하고 이에 맞는 크기에 해당하는 기능들을 동작 처리하도록 설정한 내용입니다. 

하지만 위의 코드내용으로는 다소 부족한 점이 있습니다. 
화면의 크기가 가로에서 세로로 변동되거나, 세로에서 가로로 변동되는 경우에는 각각의 기기의 크기가 변동처리되므로 이에따른 js기능이 동작해야하는데 위의 내용에서는 그러한 부분이 변하지 않습니다.
즉, js에서는 화면의 기기값이 변한다고 하더라도 해당기능을 바로 동작하지 않는다는 내용입니다. 
이에, 자동으로 새로고침을 처리하도록 만드는 기능이 필요합니다. 

```js
// js
(function($) {
	// 브라우저의 화면사이즈가 변한다면
    $(window).on('resize', function(){
        // 새로고침 실행
        location.reload();
    });
})(jQuery);
```

화면의 사이즈가 변한다면 처리되는 기능을 처리한 것입니다.
조금더 깊이 들어가도록 하겠습니다. 
사실 모바일 기기들은 화면을 스크롤하면 상단의 주소창이 일정시간이 흐르거나 일정화면 이하에서는 사라지는 현상이 있습니다. 
이때문에 위의 코드가 문제되기도 합니다. (매번 새로고침이 일어나면서, 화면이 상단으로 이동되기도 하죠)
이에 기기화면이 세로가 아닌 가로값이 변하는 경우에만 새로고침이 되도록 처리합니다. 

```js
// js
(function($) {
    // 브라우저의 화면의 가로사이즈 측정
    var $w = $(window).width();
	// 브라우저의 화면사이즈가 변한다면
    $(window).on('resize', function(){
        //화면이 변했을때 화면의 가로사이즈 측정
        var $nw = $(window).width();
        // 화면이 변하지 않았을경우의 사이즈와, 화면이 변화되었을내용의 가로사이즈를 비교시, 
        // 값이 동일하지 않다면(즉, 가로화면이 변경되었을 경우)
        if($w !== $nw){
         // 새로고침 실행
        location.reload();   
        }
    });
})(jQuery);
```

위 코드를 작성하여, 화면의 가로값이 변경되었을 경우에만 새로고침을 처리하도록 하는 명령을 만들어줍니다. 

**javascript**에서 보여주는 기능이 복잡하고 어려우므로 다시 전체 내용을 정리하여 작성하겠습니다. 

```js
// rwd-js
(function($) {
    // 브라우저의 화면의 가로사이즈 측정
    var $w = $(window).width();
    
    // ------------------------------------------------
	// 브라우저의 화면사이즈가 변한다면
    $(window).on('resize', function(){
        //화면이 변했을때 화면의 가로사이즈 측정
        var $nw = $(window).width();
        // 화면이 변하지 않았을경우의 사이즈와, 화면이 변화되었을내용의 가로사이즈를 비교시, 
        // 값이 동일하지 않다면(즉, 가로화면이 변경되었을 경우)
        if($w !== $nw){
         // 새로고침 실행
        location.reload();   
        }
    });
    
    // ------------------------------------------------
    if($w <= 480){
      console.log('모바일 세로형 형태');
    } else if ($w >= 481 && $w <= 768){
      console.log('모바일 가로형, 타블렛 세로형');
    } else if ($w >= 769 && $w <= 1366){
      console.log('타블렛 가로형, pc형');
    } else if ($w >= 1367) {
      console.log('pc full(확장) 형태');
    }
})(jQuery);
```



---

참조: 

- [html viewport 모바일브라우저상에서 레이아웃조정](https://developer.mozilla.org/ko/docs/Mozilla/Mobile/Viewport_meta_tag)
- [css미디어쿼리 구문 상세내용](https://developer.mozilla.org/ko/docs/Web/Guide/CSS/Media_queries)
- [스포카기술블로그의 반응형웹제작방법 샘플](https://spoqa.github.io/2012/08/16/make-a-responsive-web.html)

